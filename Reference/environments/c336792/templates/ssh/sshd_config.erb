Port <%= scope.lookupvar('ssh::params::listenport') %>
ListenAddress <%= scope.lookupvar('ssh::params::listenip') %>
Protocol 2
HostKey /etc/ssh/ssh_host_rsa_key
HostKey /etc/ssh/ssh_host_dsa_key
UsePrivilegeSeparation yes
KeyRegenerationInterval 3600
ServerKeyBits 768
SyslogFacility AUTH
LogLevel INFO
LoginGraceTime 120
PermitRootLogin <%= scope.lookupvar('ssh::params::permitroot') %>
StrictModes yes
RSAAuthentication no
PubkeyAuthentication <%= scope.lookupvar('ssh::params::pubkeyauthentication') %>
IgnoreRhosts yes
RhostsRSAAuthentication no
HostbasedAuthentication no
PermitEmptyPasswords no
ChallengeResponseAuthentication no
X11Forwarding <%= scope.lookupvar('ssh::params::x11forwarding') %>
X11DisplayOffset 10
PrintMotd no
PrintLastLog yes
TCPKeepAlive yes
AcceptEnv LANG LC_*
Subsystem sftp <%= scope.lookupvar('ssh::params::sftpsubsystemcommand') %> -l INFO
UsePAM <%= scope.lookupvar('ssh::params::usepam') %>
Banner /etc/banner
UseDNS no
AuthorizedKeysFile     %h/.ssh/authorized_keys
AllowTcpForwarding <%= scope.lookupvar('ssh::params::allowtcpforwarding') %>
AllowAgentForwarding <%= scope.lookupvar('ssh::params::allowagentforwarding') %>
ClientAliveInterval <%= scope.lookupvar('ssh::params::clientaliveinterval') %>
ClientAliveCountMax <%= scope.lookupvar('ssh::params::clientalivecountmax') %>
<% if scope.lookupvar('ssh::params::enablesftpchrooted') -%>
Match Group <%= scope.lookupvar('ssh::params::sftpgroup') %>
        ChrootDirectory <%= scope.lookupvar('ssh::params::sftpchrootdirectory') %>
        ForceCommand <%= scope.lookupvar('ssh::params::sftpsubsystemcommand') %>
        AllowTcpForwarding <%= scope.lookupvar('ssh::params::sftpallowtcpforwarding') %>
<% end -%>